ğŸ” What are Probes in Kubernetes (Real-Time Meaning)

In production, Kubernetes must automatically check whether your application is healthy or not.

Kubernetes does this using probes:

Liveness Probe â†’ Is the app alive or stuck?
--------------------------------------------
ğŸ‘‰ Checks whether the application is alive or stuck.
    If liveness probe fails, Kubernetes restarts the container.
    Used when the app is running but not responding (deadlock, infinite loop).

How does Liveness Probe check whether the app is alive or stuck?
Short answer:
ğŸ‘‰ Kubernetes does NOT know your app logic
ğŸ‘‰ It only checks a condition you define
ğŸ‘‰ If that condition fails repeatedly â†’ Kubernetes assumes app is stuck

ğŸ” What Kubernetes actually does (Realtime Flow)
Kubernetes runs your container
It waits for initialDelaySeconds
It periodically executes the liveness probe
If the probe fails continuously, Kubernetes says:
â€œApp is not healthy â†’ restart containerâ€

ğŸ§ª HOW does it check? (3 Real Ways)
   Kubernetes checks liveness using one of these:
1ï¸âƒ£ HTTP GET (Most Common â€“ Realtime)
Example: livenessProbe:
  httpGet:
    path: /health
    port: 8080
What actually happens?
Kubernetes sends an HTTP request:
GET http://<pod-ip>:8080/health

IMPORTANT : how do this i know this developer issue or devops issue?
---------------------------------------------------------------------\
ğŸ§  Golden Rule (Realtime)

If Kubernetes is doing what it is configured to do, and the app fails â†’ Developer issue
If Kubernetes is misconfigured â†’ DevOps issue

ğŸ” STEP-BY-STEP REALTIME DECISION FLOW
1ï¸âƒ£ Check Pod Events (MOST IMPORTANT)
COMMAND: kubectl describe pod <pod-name>
--------
Look at Events: ğŸ”´ Case A: Liveness probe failed (HTTP 500 / timeout)
                           Liveness probe failed: HTTP probe failed with statuscode: 500

ğŸ‘‰ Kubernetes config is correct
ğŸ‘‰ Probe path is correct
ğŸ‘‰ App returned error

âœ… Developer issue
---------------------------------------------
ğŸ”´ Case B: Connection refused / wrong port
Liveness probe failed: connect: connection refused
port: 8081   âŒ
But app runs on:
server.port=8080
âœ… DevOps issue (wrong port)

 livenessProbe:
          httpGet:
            path: /health
            port: 8080
          initialDelaySeconds: 40   # start AFTER readiness
          periodSeconds: 10
          timeoutSeconds: 2
          failureThreshold: 3

---------------------------------------------------------------------------------------

2) Readiness Probe â†’ Is the app ready to receive traffic?
  Checks whether the application is ready to receive traffic.
  If readiness probe fails, Kubernetes stops sending traffic to the pod (no restart).
  Used when the app is starting up, busy, or temporarily unavailable.

To check whether an issue is related to a Readiness Probe in real time;
------------------------------------------------------------------------
1ï¸âƒ£ First symptom (MOST IMPORTANT)
ğŸ‘‰ Application not accessible, but pod is running
COMMAND ; kubectl get pods
Output example: NAME        READY   STATUS    RESTARTS
                app-xyz     0/1     Running   0
ğŸ”´ Key sign
Pod = Running
READY = 0/1
âœ… This strongly indicates a READINESS issue

2ï¸âƒ£ Confirm using pod details
COMMAND : kubectl describe pod app-xyz
Look for this section: Readiness probe failed: HTTP probe failed with statuscode: 503
âœ… If you see Readiness probe failed, the issue is 100% readiness-related

3ï¸âƒ£ Check service endpoints (REALTIME TRAFFIC CHECK)
COMMAND: kubectl get endpoints <service-name>
If readiness is failing: <none>

ğŸ”´ Means:
Pod is removed from Service
No traffic is sent
âœ… This confirms a readiness problem

4ï¸âƒ£ Compare with liveness (to avoid confusion)
COMMAND; kubectl get pods

7ï¸âƒ£ Final 1-line decision rule (INTERVIEW READY)
If the pod is running but not receiving traffic and no restarts are happening â†’ it is a READINESS probe issue.

HOW TO CHECK WHETHER THE ISSUE IS DEVOPS OR DEVELOPER
-------------------------------------------------------
COMMAND; kubectl describe pod <pod-name>
ğŸ” What to look for (VERY IMPORTANT)

1ï¸âƒ£ Readiness probe errors â†’ Decide owner
You will see lines like this in Events:
ğŸ”´ Developer issue examples
Readiness probe failed: HTTP probe failed with statuscode: 500
Readiness probe failed: HTTP probe failed with statuscode: 503

ğŸ‘‰ Wrong path / port / timeout â†’ DevOps issue

 readinessProbe:
          httpGet:
            path: /ready
            port: 8080
          initialDelaySeconds: 20   # wait for app startup
          periodSeconds: 10         # check every 10 sec
          timeoutSeconds: 2
          failureThreshold: 3
------------------------------------------------------------------------------------
âœ… REALTIME (CORRECT) â€“ Readiness & Liveness Probes  

apiVersion: apps/v1
kind: Deployment
metadata:
  name: insurance-app
spec:
  replicas: 2
  selector:
    matchLabels:
      app: insurance
  template:
    metadata:
      labels:
        app: insurance
    spec:
      containers:
      - name: insurance-container
        image: insurance-app:1.0.0
        ports:
        - containerPort: 8080

        # ======================
        # READINESS PROBE
        # ======================
        readinessProbe:
          httpGet:
            path: /ready
            port: 8080
          initialDelaySeconds: 20   # wait for app startup
          periodSeconds: 10         # check every 10 sec
          timeoutSeconds: 2
          failureThreshold: 3

        # ======================
        # LIVENESS PROBE
        # ======================
        livenessProbe:
          httpGet:
            path: /health
            port: 8080
          initialDelaySeconds: 40   # start AFTER readiness
          periodSeconds: 10
          timeoutSeconds: 2
          failureThreshold: 3



